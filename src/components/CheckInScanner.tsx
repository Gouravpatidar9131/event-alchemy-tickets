import { useState } from 'react';
import { useTickets, Ticket } from '@/hooks/useTickets';
import { useEvents } from '@/hooks/useEvents';
import { Button } from '@/components/ui/button';
import { Card, CardContent, CardDescription, CardHeader, CardTitle, CardFooter } from '@/components/ui/card';
import { Input } from '@/components/ui/input';
import { QrCode, CheckCircle, XCircle, Search, Loader2, Camera, User, Clock } from 'lucide-react';
import { toast } from 'sonner';
import { Scanner as QrScanner } from '@yudiel/react-qr-scanner';

interface CheckInScannerProps {
  eventId: string;
}

interface CheckInResult {
  success: boolean;
  message: string;
  ticketData?: Ticket;
}

interface RecentCheckIn {
  id: string;
  checked_in_at: string;
  metadata?: any;
}

const CheckInScanner = ({ eventId }: CheckInScannerProps) => {
  const [isScanning, setIsScanning] = useState(false);
  const [ticketId, setTicketId] = useState('');
  const [scanResult, setScanResult] = useState<CheckInResult | null>(null);
  const [isProcessing, setIsProcessing] = useState(false);
  const [recentCheckIns, setRecentCheckIns] = useState<RecentCheckIn[]>([]);

  const { checkInTicketMutation } = useTickets();
  const { useEventQuery } = useEvents();
  const { data: event } = useEventQuery(eventId);

  const handleQRScan = async (result: string) => {
    console.log('QR Code scanned:', result);
    try {
      // Parse the QR code data
      const qrData = JSON.parse(result);
      
      // Validate that this QR code is for the correct event
      if (qrData.eventId !== eventId) {
        setScanResult({
          success: false,
          message: 'This ticket is not for this event'
        });
        setIsScanning(false);
        return;
      }

      // Check in the ticket
      await checkInTicket(qrData.ticketId);
      setIsScanning(false);
    } catch (error) {
      console.error('Error parsing QR code:', error);
      setScanResult({
        success: false,
        message: 'Invalid QR code format'
      });
      setIsScanning(false);
    }
  };

  const handleQRError = (error: any) => {
    console.error('QR Scanner error:', error);
    toast('Error accessing camera. Please check permissions.');
    setIsScanning(false);
  };

  const startScanning = () => {
    setIsScanning(true);
    setScanResult(null);
  };

  const stopScanning = () => {
    setIsScanning(false);
  };

  const checkInTicket = async (ticketIdToCheck?: string) => {
    const targetTicketId = ticketIdToCheck || ticketId;
    
    if (!targetTicketId) {
      toast('Please enter a ticket ID or scan a QR code');
      return;
    }

    setIsProcessing(true);
    setScanResult(null);

    try {
      const checkedInTicket = await checkInTicketMutation.mutateAsync(targetTicketId);
      
      setScanResult({
        success: true,
        message: 'Ticket checked in successfully!',
        ticketData: checkedInTicket
      });

      // Add to recent check-ins
      setRecentCheckIns(prev => [
        {
          id: checkedInTicket.id,
          checked_in_at: new Date().toISOString(),
          metadata: checkedInTicket.metadata
        },
        ...prev.slice(0, 4) // Keep only last 5 check-ins
      ]);

      // Clear the ticket ID field
      setTicketId('');

      // Play success sound (optional)
      try {
        const audio = new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmIZLxOBzfLZiTUIGGW57uGVRw0YVKTX8LFsGzhB4M/zw3klBSaAzfLZijcJGWy987uCPAMwk+Hzx3IlBjF31fLBejEJJm7C8NuJOAMRWKnlr4hJEgVLnOL0vWYcBDGS2fO/eSMFJG/B8NiJOAkQUare7a9qGwpKn+L0wWUdBjOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn+L0wWUcBzOT2vN/dyUGI27A8NaKOQkPUKXf7K9rGwpJn
